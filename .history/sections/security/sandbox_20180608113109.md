# Run Node.js as Non-Root User

### One Paragraph Explainer
As a rule of thumb, one should run his own JS files only. Theories aside, real-world   scenarios demand to execute JS files that are being passed dynamically at run-time. For example, consider a dynamic framework like WebPack that accepts custom loaders and execute those dynamically during build time. In the existence of some malicious plugin we wish to minimize the damage and maybe even let the flow terminate successfully - this requires to run the plugins in a sandbox environment that is fully isolated in terms of resources, error handling and the information we share with that sandbox. Three main options can help in achieving this isolation: (1) a dedicated child process - this provides a quick information isolation but demand to tame the child process, limit its execution time and recover from errors (2) a cloud serverless framework ticks all the sandbox requirements but deployment and invoking a FaaS function dynamically is not a walk in the part (3) some NPM libraries, like (https://www.npmjs.com/package/sandbox)[/npm/sandbox] and [/npm/vm2 allow execution of isolated code in 1 single line of code. Though this latter option wins in simplicity it provides a limited protection

### Code example - Using Sandbox library to run code in isolation
```javascript
const Sandbox = require("sandbox")
  , s = new Sandbox()

s.run( "lol)hai", function( output ) {
  console.log(output);
  //output='Synatx error'
});

// Example 4 - Restricted code
s.run( "process.platform", function( output ) {
  console.log(output);
  //output=Null
})

// Example 5 - Infinite loop
s.run( "while (true) {}", function( output ) {
  console.log(output);
  //output='Timeout'
})
```