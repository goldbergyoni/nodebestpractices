# –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–π—Ç–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –ø—Ä–∏ –≤–Ω–µ–¥—Ä–µ–Ω–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫ ORM/ODM –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –ø–∞–∫–µ—Ç–æ–≤ DAL

### –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –≤ –æ–¥–∏–Ω –∞–±–∑–∞—Ü

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ª–æ–≥–∏–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤—ã –¥–æ–ª–∂–Ω—ã —Å–ª–µ–¥–∏—Ç—å –∑–∞ –≤–æ–∑–º–æ–∂–Ω—ã–º–∏ –≤–µ–∫—Ç–æ—Ä–∞–º–∏ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º–∏ –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫–∞–º–∏. –ù–∞–ø–∏—Å–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ - —ç—Ç–æ —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π. –≠—Ç—É —Å–∏—Ç—É–∞—Ü–∏—é, –æ–¥–Ω–∞–∫–æ, –ª–µ–≥–∫–æ –∏–∑–±–µ–∂–∞—Ç—å, –∫–æ–≥–¥–∞ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –ø–∞–∫–µ—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–≤–æ–¥–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö. –í–æ –º–Ω–æ–≥–∏—Ö —Å–ª—É—á–∞—è—Ö –≤–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –≤ —Ü–µ–ª–æ—Å—Ç–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç–∏ –±–ª–∞–≥–æ–¥–∞—Ä—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä [joi](https://github.com/hapijs/joi) –∏–ª–∏ [yup](https://github.com/jquense/yup) –∏ ORM/ODM –∏–∑ —Å–ø–∏—Å–∫–∞ –Ω–∏–∂–µ. –≠—Ç–æ –¥–æ–ª–∂–Ω–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–∏–≤—è–∑–æ–∫ –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã–º –æ–±—Ä–∞–∑–æ–º —ç–∫—Ä–∞–Ω–∏—Ä—É—é—Ç—Å—è –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –±–µ–∑ –æ—Ç–∫—Ä—ã—Ç–∏—è –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã—Ö –≤–µ–∫—Ç–æ—Ä–æ–≤ –∞—Ç–∞–∫–∏. –ú–Ω–æ–≥–∏–µ –∏–∑ —ç—Ç–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –æ–±–ª–µ–≥—á–∞—Ç –≤–∞—à—É –∂–∏–∑–Ω—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–≤ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–æ–ª–µ–∑–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, —Ç–∞–∫–∏—Ö –∫–∞–∫ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–∏—Å–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤—Ä—É—á–Ω—É—é, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –¥–ª—è —è–∑—ã–∫–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º —Ç–∏–ø–æ–≤ –∏–ª–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö –≤ —Ç—Ä–µ–±—É–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã. –í –∑–∞–∫–ª—é—á–µ–Ω–∏–µ, __always__ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª—é–±—ã–µ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã —Å–æ–±–∏—Ä–∞–µ—Ç–µ—Å—å —Ö—Ä–∞–Ω–∏—Ç—å, –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ–±—ã —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è —Å –æ–ø–∞—Å–Ω–æ–π –¥–ª—è –≤–∞—Å —Ä–∞–±–æ—Ç–æ–π.


### –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏

- [TypeORM](https://github.com/typeorm/typeorm)
- [sequelize](https://github.com/sequelize/sequelize)
- [mongoose](https://github.com/Automattic/mongoose)
- [Knex](https://github.com/tgriesser/knex)
- [Objection.js](https://github.com/Vincit/objection.js)
- [waterline](https://github.com/balderdashy/waterline)

### –ü—Ä–∏–º–µ—Ä - –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –≤ NoSQL

```javascript
// A query of
db.balances.find({
  active: true,
  $where: (obj) => obj.credits - obj.debits < userInput
});;

// Where userInput equals
"(function(){var date = new Date(); do{curDate = new Date();}while(curDate-date<10000); return Math.max();})()"

// will trigger a denial of service

// Another user input might inject other logic resulting in the database exposing sensitive data
```

### –ü—Ä–∏–º–µ—Ä - SQL-–∏–Ω—ä–µ–∫—Ü–∏—è

```sql
SELECT username, firstname, lastname FROM users WHERE id = 'user input';

SELECT username, firstname, lastname FROM users WHERE id = 'evil'input';
```

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

üîó [OWASP SQL Injection](https://www.owasp.org/index.php/SQL_Injection)

üîó [OWASP SQL Injection Prevention Cheat Sheet](https://github.com/OWASP/CheatSheetSeries)

üîó [Testing for NoSQL Injection](https://www.owasp.org/index.php/Testing_for_NoSQL_injection)

### –ß—Ç–æ –≥–æ–≤–æ—Ä—è—Ç –¥—Ä—É–≥–∏–µ –±–ª–æ–≥–µ—Ä—ã

–†–∏—Å–∫–∏ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è NoSQL –∏–∑ [OWASP wiki](https://www.owasp.org/index.php/Testing_for_NoSQL_injection)

> –ê—Ç–∞–∫–∏ NoSQL-–∏–Ω—ä–µ–∫—Ü–∏–µ–π –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ –¥—Ä—É–≥–∏—Ö –æ–±–ª–∞—Å—Ç—è—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —á–µ–º —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–µ SQL-–∏–Ω—ä–µ–∫—Ü–∏–∏. –¢–∞–º, –≥–¥–µ SQL-–∏–Ω—ä–µ–∫—Ü–∏—è –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ —è–¥—Ä–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –≤–∞—Ä–∏–∞–Ω—Ç—ã NoSQL –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤–æ –≤—Ä–µ–º—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–ª–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ API-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ NoSQL –∏ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö. –û–±—ã—á–Ω–æ –∞—Ç–∞–∫–∏ —Å –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ–º NoSQL –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–∞–º, –≥–¥–µ —Å—Ç—Ä–æ–∫–∞ –∞—Ç–∞–∫–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç—Å—è –∏–ª–∏ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç—Å—è –≤ –≤—ã–∑–æ–≤ API NoSQL.
